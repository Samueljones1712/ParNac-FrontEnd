<div class="form-container">

    <form class="form" [formGroup]="entradaForm" (ngSubmit)="agregar()" style="display: flex;
    align-items: stretch;">

        <div style="display: flex;
        justify-content: center;">
            <h5>Guardar Entrada</h5>
        </div>

        <input type="hidden" id="Id" formControlName="Id">
        <!--<div class="container-input">
            <label for="fecha">Pedido: </label>
            <input type="datetime-local" id="fecha" formControlName="fecha">
        </div> -->
        <div class="container-input" *ngIf="!loadingParks">
            <label for="cedula">Cedula:</label>
            <input list="listAdmins" id="cedula" [(ngModel)]="cedula" (change)="saveCedula($event)">
            <datalist id="listAdmins">
                <option *ngFor="let a of listAdmins" [value]="a.cedula">{{a.nombre}} - {{a.apellido}}</option>
            </datalist>
        </div>

        <div class="container-input" *ngIf="!loadingCedula">
            <label for="fk_idParque">Parque:</label>
            <input list="listaParques" id="fk_idParque" [(ngModel)]="fk_idParque" (change)="savePark($event)">
            <datalist id="listaParques">
                <option *ngFor="let c of listParks" [value]="c.Nombre">{{c.Provincia}}</option>
            </datalist>
        </div>
        <div class="container-input">
            <label>Parque:{{nombreParque}}</label>
        </div>
        <div class="container-input">
            <label>Cedula:{{nombreCedula}}</label>
        </div>
        <div class="container-input">
            <label>Tarifa:{{tarifa}}</label>
        </div>
        <div class="container-input">
            <label for="estado">Estado: </label>
            <select id="estado" formControlName="estado">
                <option value="Activo" selected="selected">Aprobada</option>
                <option value="Inactivo">Cancelada</option>
            </select>
        </div>
        <div class="container-input">
            <label for="fechaVencimiento">Vencimiento:</label>
            <input type="date" id="fechaVencimiento" formControlName="fechaVencimiento">
        </div>
        <div class="container-submit">
            <button class="button-secondary submit-form" type="submit" [disabled]="!entradaForm.valid">Guardar</button>
        </div>
    </form>
</div>


<div>
    <table datatable [dtOptions]="dtOptions" *ngIf="!loading">
        <thead>
            <tr>
                <th>fecha</th>
                <th>cedula</th>
                <th>idParque</th>
                <th>tarifa</th>
                <th>estado</th>
                <th>fecha vencimiento</th>
                <th>Opciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of listEntradas">
                <td>{{item.fecha}}</td>
                <td>{{item.fk_cedula}}</td>
                <td>{{item.fk_idParque}}</td>
                <td>{{item.tarifa}}</td>
                <td>{{item.estado}}</td>
                <td>{{item.fechaVencimiento}}</td>
                <td><button (click)="eliminar(item.id!)">Eliminar</button></td>
            </tr>
        </tbody>
    </table>
</div>


<div class="spinner-div" style="margin-top: 5%;">
    <app-spinner *ngIf="loading"></app-spinner>
</div>